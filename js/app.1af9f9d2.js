(()=>{"use strict";var e={583:(e,t,s)=>{var r=s(751),n=s(641),o=s(33);const i={id:"app"},c=(0,n.Lk)("h1",null,"Spanische Verben lernen",-1),a=["onClick"],u={key:1},l=(0,n.Lk)("h2",null,"Statistik",-1),d=(0,n.Lk)("h3",null,"Gesamtstatistik",-1);function h(e,t,s,r,h,p){const b=(0,n.g2)("Lesson");return(0,n.uX)(),(0,n.CE)("div",i,[c,(0,n.Lk)("div",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(h.lessons,((e,t)=>((0,n.uX)(),(0,n.CE)("button",{key:t,onClick:e=>p.selectLesson(t)},[(0,n.eW)((0,o.v_)(e.name)+" ",1),(0,n.Lk)("div",{style:(0,o.Tr)(p.getPercentageStyle(p.lessonCompletionPercentage(e))),class:"percentage"},(0,o.v_)(p.lessonCompletionPercentage(e))+"% ",5)],8,a)))),128))]),null!==h.selectedLesson?((0,n.uX)(),(0,n.Wv)(b,{key:h.selectedLesson.id,verbs:h.selectedVerbs,"num-questions":h.numQuestions,onLessonComplete:p.showStatistics,onUpdateStatistics:p.updateStatistics},null,8,["verbs","num-questions","onLessonComplete","onUpdateStatistics"])):(0,n.Q3)("",!0),h.statisticsVisible?((0,n.uX)(),(0,n.CE)("div",u,[l,(0,n.Lk)("p",null,"Richtige Antworten: "+(0,o.v_)(h.correctAnswers),1),(0,n.Lk)("p",null,"Falsche Antworten: "+(0,o.v_)(h.numQuestions-h.correctAnswers),1),d,(0,n.Lk)("ul",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(h.selectedVerbs,((e,t)=>((0,n.uX)(),(0,n.CE)("li",{key:t},(0,o.v_)(e.prompt)+": Richtig "+(0,o.v_)(e.correct)+" | Falsch "+(0,o.v_)(e.wrong),1)))),128))]),(0,n.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>p.resetLesson&&p.resetLesson(...e))},"Neue Lektion starten")])):(0,n.Q3)("",!0)])}const p=e=>((0,n.Qi)("data-v-78e8630a"),e=e(),(0,n.jt)(),e),b=p((()=>(0,n.Lk)("h2",null,"Lektion",-1))),v={key:0},m={key:0,style:{"margin-top":"10px"}},f={key:0,style:{color:"green"}},g={key:1,style:{color:"red"}},w={key:1},k=p((()=>(0,n.Lk)("h3",null,"Lektion abgeschlossen!",-1)));function y(e,t,s,i,c,a){return(0,n.uX)(),(0,n.CE)("div",null,[b,c.currentQuestionIndex<s.numQuestions?((0,n.uX)(),(0,n.CE)("div",v,[(0,n.Lk)("p",null,"Frage "+(0,o.v_)(c.currentQuestionIndex+1)+" von "+(0,o.v_)(s.numQuestions),1),(0,n.Lk)("p",null,(0,o.v_)(s.verbs[c.currentQuestionIndex].prompt),1),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>c.userAnswer=e),onKeyup:t[1]||(t[1]=(0,r.jR)(((...e)=>a.submitAnswer&&a.submitAnswer(...e)),["enter"]))},null,544),[[r.Jo,c.userAnswer]]),(0,n.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>a.submitAnswer&&a.submitAnswer(...e)),style:{"margin-top":"10px"}}," Antwort prÃ¼fen "),null!==c.feedback?((0,n.uX)(),(0,n.CE)("p",m,[c.feedback?((0,n.uX)(),(0,n.CE)("span",f,"Richtig!")):((0,n.uX)(),(0,n.CE)("span",g,"Falsch! Die richtige Antwort ist: "+(0,o.v_)(c.correctAnswer),1))])):(0,n.Q3)("",!0)])):((0,n.uX)(),(0,n.CE)("div",w,[k,(0,n.Lk)("p",null," Du hast "+(0,o.v_)(c.correctAnswers)+" von "+(0,o.v_)(s.numQuestions)+" Fragen richtig beantwortet. ",1),(0,n.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>a.completeLesson&&a.completeLesson(...e))},"Statistik anzeigen")]))])}const L={name:"Lesson",props:["verbs","numQuestions"],data(){return{currentQuestionIndex:0,userAnswer:"",correctAnswers:0,feedback:null,correctAnswer:"",hasAnsweredWrong:!1}},watch:{currentQuestionIndex(e){e>=this.numQuestions&&this.completeLesson()}},methods:{submitAnswer(){const e=this.verbs[this.currentQuestionIndex].answer.toLowerCase(),t=this.userAnswer.toLowerCase()===e;this.correctAnswer=this.verbs[this.currentQuestionIndex].answer,t?(this.feedback=!0,this.hasAnsweredWrong||(this.correctAnswers++,this.$emit("updateStatistics",this.currentQuestionIndex,!0)),setTimeout((()=>{this.nextQuestion()}),500)):(this.hasAnsweredWrong=!0,this.feedback=!1,this.$emit("updateStatistics",this.currentQuestionIndex,!1))},nextQuestion(){null!==this.feedback&&(this.currentQuestionIndex++,this.userAnswer="",this.feedback=null,this.correctAnswer="",this.hasAnsweredWrong=!1)},completeLesson(){this.$emit("lessonComplete",this.correctAnswers)},resetState(){this.currentQuestionIndex=0,this.userAnswer="",this.correctAnswers=0,this.feedback=null,this.correctAnswer="",this.hasAnsweredWrong=!1}}};var A=s(262);const C=(0,A.A)(L,[["render",y],["__scopeId","data-v-78e8630a"]]),I=C;var Q=s(8);const _="https://pahiqicgypbanlfepvpi.supabase.co",x="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBhaGlxaWNneXBiYW5sZmVwdnBpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTU4MDUwMzUsImV4cCI6MjAzMTM4MTAzNX0.ydqB3NBZGuhL0i-ambVYAPa9uJyBaM9AY5Yqg4KU-rE",O=(0,Q.UU)(_,x),E={name:"App",components:{Lesson:I},data(){return{lessons:[],selectedLesson:null,selectedVerbs:[],statisticsVisible:!1,correctAnswers:0,numQuestions:7}},mounted(){this.loadLessons()},methods:{async loadLessons(){let{data:e,error:t}=await O.from("lessons").select("id, name, verbs:verbs(id, prompt, answer, correct, wrong)");t?console.error("Error loading lessons:",t):this.lessons=e},selectLesson(e){this.resetState(),this.selectedLesson=this.lessons[e],this.statisticsVisible=!1,this.correctAnswers=0,this.selectedVerbs=this.getWeightedRandomVerbs(this.lessons[e].verbs,this.numQuestions)},getWeightedRandomVerbs(e,t){const s=e.reduce(((e,t)=>{const s=(t.wrong+1)/(t.correct+1);return t.weight=s,e+s}),0),r=[];for(let n=0;n<t;n++){const t=Math.random()*s;let n=0;for(const s of e)if(n+=s.weight,t<n){r.push(s);break}}return r},showStatistics(e){this.correctAnswers=e,this.statisticsVisible=!0},resetLesson(){this.statisticsVisible=!1,this.selectedLesson=null,this.selectedVerbs=[]},async updateStatistics(e,t){const s=this.selectedVerbs[e],r=t?s.correct+1:s.correct,n=t?s.wrong:s.wrong+1;let{error:o}=await O.from("verbs").update({correct:r,wrong:n}).eq("id",s.id);o?console.error("Error updating verb:",o):(s.correct=r,s.wrong=n)},resetState(){this.correctAnswers=0,this.selectedVerbs=[]},lessonCompletionPercentage(e){if(!e.verbs||0===e.verbs.length)return 0;const t=e.verbs.length,s=e.verbs.filter((e=>e.correct>e.wrong)).length;return(s/t*100).toFixed(2)},getPercentageStyle(e){const t=40+1.5*(100-e),s=40+1.5*e;return{backgroundColor:`rgb(${t}, ${s}, 40)`,color:"white",padding:"5px",borderRadius:"5px",display:"inline-block",marginLeft:"10px"}}}},S=(0,A.A)(E,[["render",h]]),j=S;(0,r.Ef)(j).mount("#app")}},t={};function s(r){var n=t[r];if(void 0!==n)return n.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,s),o.exports}s.m=e,(()=>{var e=[];s.O=(t,r,n,o)=>{if(!r){var i=1/0;for(l=0;l<e.length;l++){for(var[r,n,o]=e[l],c=!0,a=0;a<r.length;a++)(!1&o||i>=o)&&Object.keys(s.O).every((e=>s.O[e](r[a])))?r.splice(a--,1):(c=!1,o<i&&(i=o));if(c){e.splice(l--,1);var u=n();void 0!==u&&(t=u)}}return t}o=o||0;for(var l=e.length;l>0&&e[l-1][2]>o;l--)e[l]=e[l-1];e[l]=[r,n,o]}})(),(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;s.t=function(r,n){if(1&n&&(r=this(r)),8&n)return r;if("object"===typeof r&&r){if(4&n&&r.__esModule)return r;if(16&n&&"function"===typeof r.then)return r}var o=Object.create(null);s.r(o);var i={};e=e||[null,t({}),t([]),t(t)];for(var c=2&n&&r;"object"==typeof c&&!~e.indexOf(c);c=t(c))Object.getOwnPropertyNames(c).forEach((e=>i[e]=()=>r[e]));return i["default"]=()=>r,s.d(o,i),o}})(),(()=>{s.d=(e,t)=>{for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}})(),(()=>{s.f={},s.e=e=>Promise.all(Object.keys(s.f).reduce(((t,r)=>(s.f[r](e,t),t)),[]))})(),(()=>{s.u=e=>"js/"+e+".4bc4c8e8.js"})(),(()=>{s.miniCssF=e=>{}})(),(()=>{s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{var e={},t="vite-vue-starter:";s.l=(r,n,o,i)=>{if(e[r])e[r].push(n);else{var c,a;if(void 0!==o)for(var u=document.getElementsByTagName("script"),l=0;l<u.length;l++){var d=u[l];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+o){c=d;break}}c||(a=!0,c=document.createElement("script"),c.charset="utf-8",c.timeout=120,s.nc&&c.setAttribute("nonce",s.nc),c.setAttribute("data-webpack",t+o),c.src=r),e[r]=[n];var h=(t,s)=>{c.onerror=c.onload=null,clearTimeout(p);var n=e[r];if(delete e[r],c.parentNode&&c.parentNode.removeChild(c),n&&n.forEach((e=>e(s))),t)return t(s)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:c}),12e4);c.onerror=h.bind(null,c.onerror),c.onload=h.bind(null,c.onload),a&&document.head.appendChild(c)}}})(),(()=>{s.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{s.p="/learn-spanish/"})(),(()=>{var e={524:0};s.f.j=(t,r)=>{var n=s.o(e,t)?e[t]:void 0;if(0!==n)if(n)r.push(n[2]);else{var o=new Promise(((s,r)=>n=e[t]=[s,r]));r.push(n[2]=o);var i=s.p+s.u(t),c=new Error,a=r=>{if(s.o(e,t)&&(n=e[t],0!==n&&(e[t]=void 0),n)){var o=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;c.message="Loading chunk "+t+" failed.\n("+o+": "+i+")",c.name="ChunkLoadError",c.type=o,c.request=i,n[1](c)}};s.l(i,a,"chunk-"+t,t)}},s.O.j=t=>0===e[t];var t=(t,r)=>{var n,o,[i,c,a]=r,u=0;if(i.some((t=>0!==e[t]))){for(n in c)s.o(c,n)&&(s.m[n]=c[n]);if(a)var l=a(s)}for(t&&t(r);u<i.length;u++)o=i[u],s.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return s.O(l)},r=self["webpackChunkvite_vue_starter"]=self["webpackChunkvite_vue_starter"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r=s.O(void 0,[504],(()=>s(583)));r=s.O(r)})();
//# sourceMappingURL=app.1af9f9d2.js.map